# Cocolify - 反貧困支援チャットボット 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
**Cocolify**（ココライフィ）

### 1.2 目的
貧困・格差問題に直面している人々に対して、適切な支援機関や相談先を紹介するAI搭載チャットボットWebアプリケーション。見えない貧困の現場にテクノロジーを活用してアウトリーチを行う。

### 1.3 対象地域
大阪市（第一段階）

### 1.4 開発規模
個人開発（1人）、Streamlitベース

## 2. 機能要件

### 2.1 基本機能

#### 2.1.1 チャット機能
- ユーザーとの対話型インターフェース
- 自然言語による相談内容の入力受付
- AI（OpenAI GPT-4等）による相談内容の理解・分析

#### 2.1.2 地域情報入力
- 居住地域の選択（大阪市内の区単位）
- 郵便番号による地域特定機能

#### 2.1.3 相談内容カテゴリー判定
- AIによる相談内容の自動分類
- 主要カテゴリー：
  - 生活保護・福祉制度
  - 就労支援・職業訓練
  - 住居問題
  - 債務・法律問題
  - 医療・健康
  - 子育て・教育
  - 高齢者支援
  - 精神的サポート

#### 2.1.4 支援機関紹介
- カテゴリーと地域に基づく適切な支援機関の提示
- 連絡先情報の表示
- 利用可能時間・条件の表示

### 2.2 データ管理機能

#### 2.2.1 支援機関データベース
- 大阪市内の支援機関情報の管理
- 機関タイプ別分類：
  - 行政機関
  - NPO団体
  - 支援団体
  - 弁護士事務所
  - 社会福祉士
  - カウンセラー
  - 医療機関

#### 2.2.2 情報更新機能
- 管理者による支援機関情報の追加・編集
- CSV形式でのデータ一括更新

## 3. 非機能要件

### 3.1 性能要件
- 応答時間：3秒以内
- 同時接続数：10人程度（個人開発規模）

### 3.2 可用性要件
- 稼働時間：24時間365日（クラウドホスティング使用）
- メンテナンス時間：月1回程度

### 3.3 セキュリティ要件
- 個人情報の暗号化
- セッション管理
- 不適切な入力に対するフィルタリング

### 3.4 プライバシー要件
- 個人を特定できる情報の保存は最小限
- 相談内容のログは匿名化

## 4. 技術仕様

### 4.1 開発環境
- **フレームワーク**: Streamlit
- **言語**: Python 3.8+
- **AI**: OpenAI GPT-4 API
- **データベース**: SQLite（開発・テスト）/ PostgreSQL（本番）
- **ホスティング**: Streamlit Cloud / Heroku

### 4.2 主要ライブラリ
- streamlit: UIフレームワーク
- openai: AI機能
- pandas: データ処理
- sqlite3 / psycopg2: データベース接続
- streamlit-chat: チャット機能拡張

### 4.3 データ構造

#### 4.3.1 支援機関テーブル
```sql
organizations (
    id INTEGER PRIMARY KEY,
    name TEXT NOT NULL,
    category TEXT NOT NULL,
    subcategory TEXT,
    address TEXT,
    ward TEXT,
    phone TEXT,
    email TEXT,
    website TEXT,
    hours TEXT,
    description TEXT,
    conditions TEXT,
    created_at TIMESTAMP,
    updated_at TIMESTAMP
)
```

#### 4.3.2 相談ログテーブル
```sql
consultation_logs (
    id INTEGER PRIMARY KEY,
    session_id TEXT,
    user_ward TEXT,
    category TEXT,
    inquiry_summary TEXT,
    recommended_orgs TEXT,
    created_at TIMESTAMP
)
```

## 5. ユーザーインターフェース設計

### 5.1 画面構成
1. **メイン画面**
   - チャットインターフェース
   - 地域選択エリア
   - 使い方説明

2. **結果表示画面**
   - 推奨支援機関リスト
   - 詳細情報表示
   - 連絡先情報

3. **管理画面**（簡易版）
   - 支援機関データの追加・編集
   - 利用統計の確認

### 5.2 UI/UXの方針
- シンプルで直感的な操作
- モバイルフレンドリー
- アクセシビリティ対応
- 多言語対応の準備（将来的に）

## 6. 開発スケジュール

### Phase 1: 基盤開発（4週間）
- 基本的なStreamlitアプリケーション構築
- データベース設計・構築
- 支援機関データの収集・整理

### Phase 2: AI機能実装（3週間）
- OpenAI API統合
- 相談内容分類機能
- チャット機能の実装

### Phase 3: 機能拡張（3週間）
- 地域別絞り込み機能
- 結果表示の改善
- 管理機能の実装

### Phase 4: テスト・改善（2週間）
- 動作テスト
- ユーザビリティテスト
- バグ修正・改善

## 7. 制約事項

### 7.1 技術的制約
- 個人開発のため、複雑な機能は段階的に実装
- API利用料金の制限（OpenAI API）
- 無料ホスティングサービスの制限

### 7.2 データ制約
- 初期段階では限定的な支援機関データ
- 手動でのデータ更新が必要

### 7.3 運用制約
- 24時間サポート体制は困難
- 緊急時対応は別途案内

## 8. 成功指標

### 8.1 利用指標
- 月間アクティブユーザー数：100人
- 相談完了率：80%以上
- ユーザー満足度：4.0/5.0以上

### 8.2 効果指標
- 支援機関への実際の相談につながった件数
- ユーザーからのフィードバック
- 支援機関からの評価

## 9. 将来的な拡張計画

### 9.1 機能拡張
- 他の地域への展開
- 多言語対応
- 音声入力機能
- LINE連携

### 9.2 技術拡張
- より高度なAI機能
- レコメンデーション機能の改善
- データ分析機能の追加

## 10. リスク管理

### 10.1 技術リスク
- API利用制限によるサービス停止
- データベース障害
- セキュリティ脆弱性

### 10.2 運用リスク
- 不適切な相談内容への対応
- 支援機関情報の古さ
- 法的責任の所在

### 10.3 対策
- 利用規約の明確化
- 定期的なデータ更新
- 緊急時連絡先の明示
- 専門機関への適切な誘導